<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정치 성향 테스트 시스템 검증</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        h2 {
            color: #555;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        .test-case {
            background: #f8f9fa;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .result {
            font-weight: bold;
            color: #28a745;
            margin-top: 10px;
        }
        .error {
            color: #dc3545;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .axis-result {
            display: inline-block;
            margin: 5px;
            padding: 5px 10px;
            background: #e9ecef;
            border-radius: 4px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .question-direction {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            margin-left: 5px;
        }
        .positive {
            background: #d4edda;
            color: #155724;
        }
        .negative {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>정치 성향 테스트 시스템 검증</h1>
        <p>질문의 방향성을 고려한 새로운 점수 계산 시스템을 테스트합니다.</p>
        
        <h2>1. 극단적 테스트 케이스</h2>
        
        <div class="test-case">
            <h3>모든 질문에 "그렇다"(5점) 선택</h3>
            <button onclick="testAllAgree()">테스트 실행</button>
            <div id="all-agree-result"></div>
        </div>
        
        <div class="test-case">
            <h3>모든 질문에 "그렇지 않다"(1점) 선택</h3>
            <button onclick="testAllDisagree()">테스트 실행</button>
            <div id="all-disagree-result"></div>
        </div>
        
        <div class="test-case">
            <h3>모든 질문에 "보통"(3점) 선택</h3>
            <button onclick="testAllNeutral()">테스트 실행</button>
            <div id="all-neutral-result"></div>
        </div>
        
        <h2>2. 특정 성향 테스트</h2>
        
        <div class="test-case">
            <h3>진보적 시장주의자 (MPOS) 시뮬레이션</h3>
            <p>경제: 시장 자유, 사회: 진보, 문화: 개방, 참여: 시민</p>
            <button onclick="testMPOS()">테스트 실행</button>
            <div id="mpos-result"></div>
        </div>
        
        <div class="test-case">
            <h3>보수적 정부주의자 (GCTN) 시뮬레이션</h3>
            <p>경제: 정부 개입, 사회: 보수, 문화: 전통, 참여: 엘리트</p>
            <button onclick="testGCTN()">테스트 실행</button>
            <div id="gctn-result"></div>
        </div>
        
        <h2>3. 질문별 방향성 검증</h2>
        <button onclick="showQuestionDirections()">질문 방향성 표시</button>
        <div id="question-directions"></div>
    </div>

    <script src="political-test-script.js"></script>
    <script>
        // 테스트용 answers 배열 생성 함수
        function createAnswers(value) {
            return new Array(60).fill(value);
        }
        
        // 결과 표시 함수
        function displayResult(elementId, answers, expectedType) {
            const scores = calculateScores(answers);
            if (!scores) {
                document.getElementById(elementId).innerHTML = '<div class="error">점수 계산 실패</div>';
                return;
            }
            
            const typeCode = generateTypeCode(scores);
            const result = resultTypes[typeCode];
            
            let html = `
                <div class="result">
                    <h4>계산된 점수:</h4>
                    <div>
                        <span class="axis-result">경제: ${scores.economic.toFixed(2)} → ${typeCode[0]}</span>
                        <span class="axis-result">사회: ${scores.social.toFixed(2)} → ${typeCode[1]}</span>
                        <span class="axis-result">문화: ${scores.cultural.toFixed(2)} → ${typeCode[2]}</span>
                        <span class="axis-result">참여: ${scores.participation.toFixed(2)} → ${typeCode[3]}</span>
                    </div>
                    <h4>결과 타입: ${typeCode} - ${result ? result.title : '미정의'}</h4>
                    ${expectedType ? `<p>예상 타입: ${expectedType}</p>` : ''}
                </div>
            `;
            
            document.getElementById(elementId).innerHTML = html;
        }
        
        // 테스트 케이스들
        function testAllAgree() {
            window.answers = createAnswers(5);
            displayResult('all-agree-result', answers);
        }
        
        function testAllDisagree() {
            window.answers = createAnswers(1);
            displayResult('all-disagree-result', answers);
        }
        
        function testAllNeutral() {
            window.answers = createAnswers(3);
            displayResult('all-neutral-result', answers);
        }
        
        function testMPOS() {
            // MPOS를 위한 답변 패턴 생성
            window.answers = new Array(60).fill(3); // 기본값 3
            
            // 경제축: 시장 지향 답변
            [3, 5, 6, 11, 12].forEach(i => answers[i] = 5); // positive 질문에 동의
            [0, 1, 2, 4, 7, 8, 9, 10, 13, 14].forEach(i => answers[i] = 1); // negative 질문에 반대
            
            // 사회축: 진보적 답변
            [15, 16, 17, 19, 20, 21, 22, 23, 25, 27, 29].forEach(i => answers[i] = 5); // positive 질문에 동의
            [18, 24, 26, 28].forEach(i => answers[i] = 1); // negative 질문에 반대
            
            // 문화축: 개방적 답변
            [30, 32, 34, 37, 38, 40, 43].forEach(i => answers[i] = 5); // positive 질문에 동의
            [31, 33, 35, 36, 39, 41, 42, 44].forEach(i => answers[i] = 1); // negative 질문에 반대
            
            // 참여축: 시민 참여 답변
            [45, 47, 49, 51, 53, 55, 57, 59].forEach(i => answers[i] = 5); // positive 질문에 동의
            [46, 48, 50, 52, 54, 56, 58].forEach(i => answers[i] = 1); // negative 질문에 반대
            
            displayResult('mpos-result', answers, 'MPOS');
        }
        
        function testGCTN() {
            // GCTN을 위한 답변 패턴 생성
            window.answers = new Array(60).fill(3); // 기본값 3
            
            // 경제축: 정부 개입 지향
            [0, 1, 2, 4, 7, 8, 9, 10, 13, 14].forEach(i => answers[i] = 5); // negative 질문에 동의
            [3, 5, 6, 11, 12].forEach(i => answers[i] = 1); // positive 질문에 반대
            
            // 사회축: 보수적 답변
            [18, 24, 26, 28].forEach(i => answers[i] = 5); // negative 질문에 동의
            [15, 16, 17, 19, 20, 21, 22, 23, 25, 27, 29].forEach(i => answers[i] = 1); // positive 질문에 반대
            
            // 문화축: 전통적 답변
            [31, 33, 35, 36, 39, 41, 42, 44].forEach(i => answers[i] = 5); // negative 질문에 동의
            [30, 32, 34, 37, 38, 40, 43].forEach(i => answers[i] = 1); // positive 질문에 반대
            
            // 참여축: 엘리트 주도 답변
            [46, 48, 50, 52, 54, 56, 58].forEach(i => answers[i] = 5); // negative 질문에 동의
            [45, 47, 49, 51, 53, 55, 57, 59].forEach(i => answers[i] = 1); // positive 질문에 반대
            
            displayResult('gctn-result', answers, 'GCTN');
        }
        
        function showQuestionDirections() {
            let html = '<table><thead><tr><th>번호</th><th>질문</th><th>축</th><th>방향성</th><th>동의 시</th></tr></thead><tbody>';
            
            const axes = ['경제', '사회', '문화', '참여'];
            const axisResults = {
                '경제': { positive: 'M(시장)', negative: 'G(정부)' },
                '사회': { positive: 'P(진보)', negative: 'C(보수)' },
                '문화': { positive: 'O(개방)', negative: 'T(전통)' },
                '참여': { positive: 'S(시민)', negative: 'N(엘리트)' }
            };
            
            questions.forEach((q, index) => {
                const axisIndex = Math.floor(index / 15);
                const axis = axes[axisIndex];
                const direction = questionDirections[index];
                const directionClass = direction === 'positive' ? 'positive' : 'negative';
                const result = axisResults[axis][direction];
                
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${q.text}</td>
                        <td>${axis}</td>
                        <td><span class="question-direction ${directionClass}">${direction}</span></td>
                        <td>${result}</td>
                    </tr>
                `;
            });
            
            html += '</tbody></table>';
            document.getElementById('question-directions').innerHTML = html;
        }
    </script>
</body>
</html>