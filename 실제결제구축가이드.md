# 사이드픽 실제 결제 구축 완전 가이드

## 📋 전체 진행 순서
1. 사업자 등록 (1-2주)
2. 통신판매업 신고 (1주)
3. 토스페이먼츠 가맹점 가입 (3-5일)
4. 서버 구축 및 SSL 인증서 설치 (1-2일)
5. 결제 시스템 연동 (2-3일)
6. 테스트 및 검증 (1주)
7. 실제 운영 시작

---

## 1단계: 사업자 등록 (필수)

### 필요 서류
- 신분증
- 사업장 주소지 (재택 가능)
- 사업자 등록 신청서

### 진행 방법
1. **홈택스 온라인 신청** (www.hometax.go.kr)
   - 로그인 → 신청/제출 → 사업자등록 신청
   - 업종코드: 63999 (그 외 기타 정보서비스업)
   - 사업명: 사이드픽 또는 정치성향 기반 소개팅 서비스

2. **필수 입력 사항**
   - 사업의 종류: 서비스업
   - 업태: 정보통신업
   - 종목: 온라인 정보제공업, 소개팅 서비스

### 예상 소요 시간: 3-5일 (온라인), 즉시 (오프라인)

---

## 2단계: 통신판매업 신고

### 신고처
- 사업장 소재지 관할 구청 또는 시청
- 온라인: 정부24 (www.gov.kr)

### 필요 서류
1. 통신판매업 신고서
2. 사업자등록증 사본
3. 신분증 사본

### 신고 내용
- 판매 품목: 소개팅 서비스 (만남 주선 서비스)
- 거래 안전 조치: 토스페이먼츠 에스크로 사용

### 예상 소요 시간: 3-7일

---

## 3단계: 토스페이먼츠 가맹점 가입

### 3-1. 기본 정보 등록
1. [토스페이먼츠 가맹점 가입](https://developers.tosspayments.com) 접속
2. 사업자 정보 입력
   - 사업자등록번호
   - 통신판매업 신고번호
   - 대표자 정보

### 3-2. 서비스 정보 등록
- 서비스명: 사이드픽
- 서비스 URL: https://sidepick.kr
- 서비스 설명: 정치 성향 기반 오프라인 소개팅 서비스
- 주요 상품: 소개팅 참가비 (45,000원)

### 3-3. 정산 정보 등록
- 정산 계좌 등록
- 정산 주기 선택 (D+2 추천)

### 3-4. 심사 대기
- 예상 소요 시간: 2-3 영업일
- 추가 서류 요청 가능

---

## 4단계: 서버 환경 구축

### 4-1. 호스팅 서비스 선택
**추천 옵션:**
1. **AWS EC2** (월 $20-50)
   - t3.small 인스턴스
   - Ubuntu 22.04 LTS
   
2. **Cafe24 호스팅** (월 3-5만원)
   - Node.js 지원 플랜
   - SSL 인증서 포함

### 4-2. 도메인 및 SSL 설정
1. **도메인 구매** (연 15,000원)
   - 가비아, 후이즈 등
   - sidepick.kr 추천

2. **SSL 인증서 설치**
   ```bash
   # Let's Encrypt 무료 SSL
   sudo apt-get update
   sudo apt-get install certbot
   sudo certbot --nginx -d sidepick.kr -d www.sidepick.kr
   ```

### 4-3. 데이터베이스 설정
```bash
# MySQL 설치
sudo apt-get install mysql-server
sudo mysql_secure_installation

# 데이터베이스 생성
mysql -u root -p
CREATE DATABASE sidepick_db;
CREATE USER 'sidepick_user'@'localhost' IDENTIFIED BY 'secure_password';
GRANT ALL PRIVILEGES ON sidepick_db.* TO 'sidepick_user'@'localhost';
FLUSH PRIVILEGES;

# 스키마 적용
mysql -u sidepick_user -p sidepick_db < database-schema.sql
```

---

## 5단계: 결제 시스템 연동

### 5-1. 서버 코드 배포
```bash
# 프로젝트 클론
git clone [your-repo]
cd sidepick-server

# 의존성 설치
npm install

# 환경 변수 설정
cp .env.example .env
nano .env  # 실제 값으로 수정
```

### 5-2. 실제 키 교체
**.env 파일:**
```
# 토스페이먼츠 실제 키 (가맹점 승인 후 발급)
TOSS_CLIENT_KEY=live_ck_실제클라이언트키
TOSS_SECRET_KEY=live_sk_실제시크릿키
```

**payment-script-production.js:**
```javascript
const clientKey = 'live_ck_실제클라이언트키';
const SERVER_URL = 'https://api.sidepick.kr';
```

### 5-3. PM2로 서버 실행
```bash
# PM2 설치
npm install -g pm2

# 서버 시작
pm2 start app.js --name sidepick-api
pm2 startup
pm2 save
```

---

## 6단계: 테스트 체크리스트

### 6-1. 기능 테스트
- [ ] 회원가입 및 로그인
- [ ] 정치 성향 테스트
- [ ] 소개팅 신청
- [ ] 결제 프로세스 (카드, 계좌이체, 간편결제)
- [ ] 결제 완료 이메일 발송
- [ ] 환불 처리 (3일 전 제한)

### 6-2. 보안 테스트
- [ ] HTTPS 적용 확인
- [ ] SQL Injection 방지
- [ ] XSS 방지
- [ ] 개인정보 암호화

### 6-3. 부하 테스트
```bash
# Apache Bench로 부하 테스트
ab -n 1000 -c 100 https://api.sidepick.kr/health
```

---

## 7단계: 법적 준비사항

### 7-1. 필수 약관 작성
1. **이용약관**
   - 서비스 이용 조건
   - 회원의 권리와 의무
   - 환불 정책 (3일 전까지만 가능)

2. **개인정보처리방침**
   - 수집하는 개인정보 항목
   - 이용 목적
   - 보관 기간

3. **전자상거래 표시사항**
   - 사업자 정보
   - 고객센터 연락처
   - 환불/교환 정책

### 7-2. 고객센터 준비
- 전용 이메일: support@sidepick.kr
- 고객 응대 전화번호
- 카카오톡 채널 (선택)

---

## 💰 예상 비용 정리

### 초기 비용
- 사업자 등록: 4,800원 (수수료)
- 도메인: 15,000원/년
- 서버: 30,000원/월

### 월 운영비
- 서버 호스팅: 30,000원
- 결제 수수료: 건당 2.9% + 100원
- 정산 수수료: 무료 (D+2 기준)

### 예상 수익 계산
- 참가비: 45,000원
- 결제 수수료: 약 1,400원
- 실 수익: 43,600원/명
- 손익분기점: 월 1명 이상

---

## 🚀 즉시 시작할 수 있는 것들

1. **오늘 바로 가능**
   - 홈택스에서 사업자등록 신청
   - 도메인 구매 (sidepick.kr)
   - 토스페이먼츠 테스트 계정 생성

2. **1주일 내 완료 가능**
   - 통신판매업 신고
   - 서버 환경 구축
   - 테스트 결제 구현

3. **2주 후 운영 시작**
   - 토스페이먼츠 실제 가맹 승인
   - 실제 결제 테스트
   - 정식 서비스 오픈

---

## 📞 도움받을 수 있는 곳

### 토스페이먼츠 지원
- 기술 문의: developers@tosspayments.com
- 가맹 문의: 1544-7772
- 개발자 문서: https://docs.tosspayments.com

### 정부 지원
- 소상공인시장진흥공단: 042-363-7700
- 창업 상담: 1357

### 법률 자문
- 대한법률구조공단: 132
- 온라인 쇼핑몰 법률 자문: 한국온라인쇼핑협회

---

## ⚠️ 주의사항

1. **반드시 사업자등록 후 결제 서비스 시작**
   - 미등록 시 과태료 및 형사처벌 가능

2. **개인정보보호법 준수**
   - 회원 정보 암호화 필수
   - 개인정보 처리방침 명시

3. **정확한 환불 정책 안내**
   - 3일 전 취소 불가 정책 명확히 고지
   - 분쟁 발생 시 증빙 자료 보관

4. **정기적인 보안 업데이트**
   - 서버 보안 패치
   - SSL 인증서 갱신

---

이 가이드를 따라 진행하시면 2-3주 내에 실제 결제가 가능한 사이드픽 서비스를 운영하실 수 있습니다. 각 단계별로 막히는 부분이 있으시면 언제든 문의해주세요!