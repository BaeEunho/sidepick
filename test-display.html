<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì°¸ì„ ì¸ì› í‘œì‹œ í…ŒìŠ¤íŠ¸</title>
    <style>
        .meeting-card {
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px;
            border-radius: 8px;
        }
        .participants {
            margin-top: 10px;
        }
        .male-count, .female-count {
            display: inline-block;
            margin-right: 20px;
            padding: 5px 10px;
            background: #f0f0f0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>ì°¸ì„ ì¸ì› í‘œì‹œ í…ŒìŠ¤íŠ¸</h1>
    
    <div id="progressive-meetings">
        <h2>ì§„ë³´ ëª¨ì„</h2>
        <div class="meeting-card">
            <h3>ê°•ë‚¨ ì§„ë³´ ì„±í–¥ ì†Œê°œíŒ…</h3>
            <p class="location">ğŸ“ ê°•ë‚¨ì—­ íŒŒí‹°ë£¸</p>
            <p class="time">â° ì˜¤í›„ 3ì‹œ - 5ì‹œ</p>
            <p class="participants">
                <span class="male-count" data-gender="male" data-current="0">ğŸ‘¨ ë‚¨ì 0/4ëª…</span>
                <span class="female-count" data-gender="female" data-current="0">ğŸ‘© ì—¬ì 0/4ëª…</span>
            </p>
        </div>
    </div>
    
    <div id="conservative-meetings">
        <h2>ë³´ìˆ˜ ëª¨ì„</h2>
        <div class="meeting-card">
            <h3>ê°•ë‚¨ ë³´ìˆ˜ ì„±í–¥ ì†Œê°œíŒ…</h3>
            <p class="location">ğŸ“ ê°•ë‚¨ì—­ íŒŒí‹°ë£¸</p>
            <p class="time">â° ì˜¤í›„ 3ì‹œ - 5ì‹œ</p>
            <p class="participants">
                <span class="male-count" data-gender="male" data-current="0">ğŸ‘¨ ë‚¨ì 0/4ëª…</span>
                <span class="female-count" data-gender="female" data-current="0">ğŸ‘© ì—¬ì 0/4ëª…</span>
            </p>
        </div>
    </div>
    
    <hr>
    <h2>API í…ŒìŠ¤íŠ¸</h2>
    <button onclick="testAPI()">API í˜¸ì¶œ í…ŒìŠ¤íŠ¸</button>
    <button onclick="updateDisplay()">í™”ë©´ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸</button>
    <div id="result"></div>
    
    <script>
        // API í…ŒìŠ¤íŠ¸
        async function testAPI() {
            const resultDiv = document.getElementById('result');
            try {
                const response = await fetch('http://localhost:3000/api/meetings/attendance');
                const data = await response.json();
                resultDiv.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                
                if (data.success && data.data) {
                    updateAttendance(data.data);
                }
            } catch (error) {
                resultDiv.innerHTML = '<p style="color: red;">ì—ëŸ¬: ' + error.message + '</p>';
            }
        }
        
        // í™”ë©´ ì—…ë°ì´íŠ¸
        function updateAttendance(attendanceData) {
            console.log('updateAttendance í˜¸ì¶œ:', attendanceData);
            
            // ì§„ë³´ ëª¨ì„ ê³„ì‚°
            let progressiveMale = 0;
            let progressiveFemale = 0;
            
            Object.values(attendanceData).forEach(meeting => {
                if (meeting.orientation === 'progressive') {
                    progressiveMale += meeting.male;
                    progressiveFemale += meeting.female;
                }
            });
            
            // ì§„ë³´ ëª¨ì„ ì—…ë°ì´íŠ¸
            const progressiveCard = document.querySelector('#progressive-meetings .meeting-card');
            if (progressiveCard) {
                const maleCount = progressiveCard.querySelector('.male-count');
                const femaleCount = progressiveCard.querySelector('.female-count');
                
                if (maleCount) {
                    maleCount.textContent = `ğŸ‘¨ ë‚¨ì ${progressiveMale}/4ëª…`;
                    maleCount.style.background = progressiveMale > 0 ? '#d4f4dd' : '#f0f0f0';
                }
                if (femaleCount) {
                    femaleCount.textContent = `ğŸ‘© ì—¬ì ${progressiveFemale}/4ëª…`;
                    femaleCount.style.background = progressiveFemale > 0 ? '#d4f4dd' : '#f0f0f0';
                }
            }
        }
        
        // ìˆ˜ë™ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸
        function updateDisplay() {
            const maleCount = document.querySelector('.male-count');
            if (maleCount) {
                maleCount.textContent = 'ğŸ‘¨ ë‚¨ì 1/4ëª…';
                maleCount.style.background = '#d4f4dd';
                alert('ìˆ˜ë™ ì—…ë°ì´íŠ¸ ì™„ë£Œ!');
            } else {
                alert('male-count ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.onload = function() {
            console.log('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            testAPI();
        };
    </script>
</body>
</html>